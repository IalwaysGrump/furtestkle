
import random
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from aiogram.utils.keyboard import InlineKeyboardBuilder
import asyncio
import os

BOT_TOKEN = os.getenv("BOT_TOKEN")

bot = Bot(token=8544256639:AAFre4DGMzco0YHuDxQeuWD6ccNrWCWTw7s)
dp = Dispatcher()

QUESTIONS = [{'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ1: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ2: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ3: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ4: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ5: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ6: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ7: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ8: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ9: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ10: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ11: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ12: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ13: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ14: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ15: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ16: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ17: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ18: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ19: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ20: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ21: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ22: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ23: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ24: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ25: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ26: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ27: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ28: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ29: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ30: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ31: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ32: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ33: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ34: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ35: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ36: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ37: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ38: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ39: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ40: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ41: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ42: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ43: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ44: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ45: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ46: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ47: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 3}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ48: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 0}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ49: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 1}, {'q': '–ü–∏—Ç–∞–Ω–Ω—è ‚Ññ50: —Ç–µ—Å—Ç–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó?', 'a': ['–í–∞—Ä—ñ–∞–Ω—Ç 1', '–í–∞—Ä—ñ–∞–Ω—Ç 2', '–í–∞—Ä—ñ–∞–Ω—Ç 3', '–í–∞—Ä—ñ–∞–Ω—Ç 4'], 'c': 2}]

user_tests = {}

@dp.message(Command("start"))
async def start_test(msg: types.Message):
    user_id = msg.from_user.id
    test = random.sample(QUESTIONS, min(30, len(QUESTIONS)))
    user_tests[user_id] = {"questions": test, "current": 0, "score": 0}
    await send_question(msg.chat.id, user_id)

async def send_question(chat_id, user_id):
    data = user_tests[user_id]
    qid = data["current"]
    if qid >= len(data["questions"]):
        return await finish_test(chat_id, user_id)
    question = data["questions"][qid]
    kb = InlineKeyboardBuilder()
    for i, ans in enumerate(question["a"]):
        kb.button(text=ans, callback_data=f"ans_{i}")
    kb.adjust(1)
    await bot.send_message(chat_id,
        f"‚ùì *–ü–∏—Ç–∞–Ω–Ω—è {qid+1}/{len(data['questions'])}:*\n\n{question['q']}",
        reply_markup=kb.as_markup(), parse_mode="Markdown")

@dp.callback_query(lambda c: c.data.startswith("ans_"))
async def process_answer(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    data = user_tests.get(user_id)
    if not data:
        return await callback.answer("–ü–æ–º–∏–ª–∫–∞. –ü–æ—á–Ω—ñ—Ç—å —Ç–µ—Å—Ç –∫–æ–º–∞–Ω–¥–æ—é /start.", show_alert=True)
    qid = data["current"]
    question = data["questions"][qid]
    chosen = int(callback.data.split("_")[1])
    if chosen == question["c"]:
        data["score"] += 1
        await callback.answer("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!")
    else:
        await callback.answer("‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ")
    data["current"] += 1
    try: await callback.message.delete()
    except: pass
    await send_question(callback.message.chat.id, user_id)

async def finish_test(chat_id, user_id):
    data = user_tests[user_id]
    await bot.send_message(chat_id,
        f"üéâ *–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–æ!*\n\n–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: *{data['score']} / {len(data['questions'])}*",
        parse_mode="Markdown")
    del user_tests[user_id]

async def main():
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
